/*! revibar - v0.0.1 - 2016-05-02
* http://www.beast.io
* Copyright (c) 2016 BEAST */
var Revibar={config:{key:"68665bd4e562473884942d5db3a67a1e",client:"237567",url:"http://api.tripadvisor.com/api/partner/2.0/location/"},init:function(){var self=this,obj={key:self.config.key};self.getData(obj)},getData:function(obj){var self=this,url=self.config.url+self.config.client+"?key="+self.config.key,request=new XMLHttpRequest;request.onload=function(){if(request.status>=200&&request.status<400){var data=JSON.parse(request.responseText);switch(data.code){case 160:console.log(data.responseJson.error.message);break;case 150:console.log(data.responseJson.error.message);break;case 101:console.log(data.responseJson.error.message);break;case 120:console.log(data.responseJson.error.message);break;default:self.renderData(data)}}},request.onerror=function(){console.log("Sadly, there was an error while connecting to TripAdvisor.. Check the URL")},request.open("GET",url,!0),request.send()},renderData:function(obj){function renderRating(rating,id){for(var module=document.getElementById(id),items=module.getElementsByClassName("brb-bullet"),i=0;i<items.length;i++)rating-1>i?items[i].classList.add("brb-full"):i>rating-1&&i+1>i?(items[i].classList.add("brb-full"),items[i].classList.add("brb-half")):items[i].classList.add("empty")}function renderReviews(review_rating_count,num_reviews){var module=document.getElementById("brb-module-reviews");console.log(review_rating_count);for(var nodeList="",labelArray=["Terrible","Poor","Average","Very Good","Excellent"],i=4;i>=0;i--){var width=review_rating_count[i]/num_reviews*100,label=labelArray[i];nodeList+='<li class=""><span class="brb-data-title">'+label+'</span><div class="brb-data-bar-bg"><div class="brb-data-bar" style="width:'+width+'%"></div></div></li>'}var mainNode=module.getElementsByTagName("UL")[0];mainNode.innerHTML=nodeList}function renderField(data,id){var field=document.getElementById(id);field.innerHTML=data}var self=this;console.log(obj),renderRating(obj.subratings[0].value,"brb-module-rating-location"),renderRating(obj.subratings[1].value,"brb-module-rating-sleep"),renderRating(obj.subratings[2].value,"brb-module-rating-rooms"),renderRating(obj.subratings[3].value,"brb-module-rating-service"),renderRating(obj.subratings[4].value,"brb-module-rating-value"),renderRating(obj.subratings[5].value,"brb-module-rating-cleanliness"),renderRating(obj.rating,"brb-module-traveler-rating"),renderField(obj.num_reviews+" reviews","brb-review-count"),renderReviews(obj.review_rating_count,obj.num_reviews),self.initSwitch()},initSwitch:function(){var elMain=document.getElementById("brb-main"),elSwitch=elMain.getElementsByClassName("brb-switch")[0];elSwitch.addEventListener("click",function(){elMain.classList.contains("brb-active")?elMain.classList.remove("brb-active"):elMain.classList.add("brb-active")})}};Revibar.init();